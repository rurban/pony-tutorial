<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Aliasing - Pony Tutorial</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/highlight.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Aliasing";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../js/highlight.pack.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Pony Tutorial</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>Getting started</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../..">Welcome!</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/what-you-need-to-start/">What you need to start</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/helloworld/">Helloworld</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/how-it-works/">How it works</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/whitespace/">Whitespace</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Types</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/static-vs-dynamic/">Static vs dynamic</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/classes/">Classes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/primitives/">Primitives</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/actors/">Actors</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/traits-and-interfaces/">Traits and interfaces</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/type-aliases/">Type aliases</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/type-expressions/">Type expressions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/delegates/">Delegates</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Expressions</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/variables/">Variables</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/infix-ops/">Infix ops</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/control-structures/">Control structures</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/methods/">Methods</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/exceptions/">Exceptions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/sugar/">Sugar</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/object-literals/">Object literals</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/partial-application/">Partial application</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Capabilities</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../object-capabilities/">Object capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../reference-capabilities/">Reference capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../guarantees/">Guarantees</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Aliasing</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#aliasing-and-deny-guarantees">Aliasing and deny guarantees</a></li>
                
            
                <li class="toctree-l3"><a href="#what-counts-as-making-an-alias">What counts as making an alias?</a></li>
                
            
                <li class="toctree-l3"><a href="#ephemeral-types">Ephemeral types</a></li>
                
            
                <li class="toctree-l3"><a href="#alias-types">Alias types</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../consume-and-destructive-read/">Consume and destructive read</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../recovering-capabilities/">Recovering capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../combining-capabilities/">Combining capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../passing-and-sharing/">Passing and sharing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../capability-subtyping/">Capability subtyping</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../arrow-types/">Arrow types</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../trust-boundary/">Trust boundary</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Generics</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../generics/polymorphic-types/">Polymorphic types</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../generics/polymorphic-methods/">Polymorphic methods</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../composition-inheritance/code-sharing/">Code sharing</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Pattern Matching</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../pattern-matching/match/">Match</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../pattern-matching/as/">As</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Packages</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/package-system/">Package system</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/use-statement/">Use statement</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/builtin/">Builtin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/platform/">Use conditions</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../compiler-clargs/clargs/">Compiler args</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>C FFI</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../c-ffi/calling-c/">Calling C</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../c-ffi/linking-c/">Linking to C Libraries</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../c-ffi/c-abi/">C abi</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>The Runtime</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../runtime/otp/">Otp</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../runtime/memory-allocation/">Memory allocation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../runtime/garbage-collection/">Garbage collection</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../examples/examples/">Examples</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Pony Tutorial</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Capabilities &raquo;</li>
        
      
    
    <li>Aliasing</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><strong>Aliasing</strong> means having more than one variable that points to the same object.</p>
<p>In most programming languages, aliasing is pretty simple. You just assign some variable to another variable, and there you go, you have an alias. The variable you assign to has the same type (or some supertype) as what's being assigned to it, and everything is fine.</p>
<p>In Pony, that works for some reference capabilities, but not all.</p>
<h1 id="aliasing-and-deny-guarantees">Aliasing and deny guarantees</h1>
<p>The reason for this is that the <code>iso</code> reference capability denies other <code>iso</code> variables that point to the same object. That is, you can only have one <code>iso</code> variable pointing to any given object. The same goes for <code>trn</code>.</p>
<pre><code class="pony">fun test(a: Wombat iso) =&gt;
  var b: Wombat iso = a // Not allowed!
</code></pre>

<p>Here we have some function that gets passed an isolated Wombat. If we try to alias <code>a</code> by assigning it to <code>b</code>, we'll be breaking reference capability guarantees so the compiler will stop us.</p>
<p><strong>What can I alias an <code>iso</code> as?</strong> Since an <code>iso</code> says no other variable can be used by <em>any</em> actor to read from or write to that object, we can only create aliases to an <code>iso</code> that can neither read nor write. Fortunately, we've got a reference capability that does exactly that: <code>tag</code>. So we can do this and the compiler will be happy:</p>
<pre><code class="pony">fun test(a: Wombat iso) =&gt;
  var b: Wombat tag = a // Allowed!
</code></pre>

<p><strong>What about aliasing <code>trn</code>?</strong> Since a <code>trn</code> says no other variable can be used by <em>any</em> actor to write to that object, we need something that doesn't allow writing, but also doesn't prevent our <code>trn</code> variable from writing. Fortunately, weve got a reference capability that does that too: <code>box</code>. So we can do this and the compiler will be happy:</p>
<pre><code class="pony">fun test(a: Wombat trn) =&gt;
  var b: Wombat box = a // Allowed!
</code></pre>

<p><strong>What about aliasing other stuff?</strong> Everything else can be aliased as itself. So <code>ref</code> can be aliased as <code>ref</code>, <code>val</code> can be aliased as <code>val</code>, <code>box</code> can be aliased as <code>box</code> and <code>tag</code> can be aliased as <code>tag</code>.</p>
<h1 id="what-counts-as-making-an-alias">What counts as making an alias?</h1>
<p>There are two things that count as making an alias:</p>
<ol>
<li>When you <strong>assign</strong> a value to a variable. This could be a local variable or a field.</li>
<li>When you <strong>pass</strong> a value as an argument to a method.</li>
</ol>
<p>In both cases, you are making a new <em>name</em> for the object. This might be the name of a local variable, the name of a field, or the name of a parameter to a method.</p>
<h1 id="ephemeral-types">Ephemeral types</h1>
<p>In Pony, every expression has a type. So what's the type of <code>consume a</code>? It's not the same type as <code>a</code>, because it might not be possible to alias <code>a</code>. Instead, it's an <strong>ephemeral</strong> type. That is, it's a type for a value that currently has no name (it might have a name through some other alias, but not the one we just consumed or destructively read).</p>
<p>To show a type is ephemeral, we put a <code>^</code> at the end. For example:</p>
<pre><code class="pony">fun test(a: Wombat iso): Wombat iso^ =&gt;
  consume a
</code></pre>

<p>Here, our function takes an isolated Wombat as a parameter, and returns an ephemeral isolated Wombat.</p>
<p>This is useful for dealing with <code>iso</code> and <code>trn</code> types, and for generic types, but it's also important for constructors. A constructor always returns an ephemeral type, because it's a new object.</p>
<h1 id="alias-types">Alias types</h1>
<p>For the same reason Pony has ephemeral types, it also has alias types. An alias type is a way of saying "whatever we can safely alias this thing as". It's only needed when dealing with generic types, which we'll discuss later.</p>
<p>We indicate an alias type by putting a <code>!</code> at the end. Here's an example:</p>
<pre><code class="pony">fun test(a: A) =&gt;
  var b: A! = a
</code></pre>

<p>Here, we're using <code>A</code> as a <strong>type variable</strong>, which we'll cover later. So <code>A!</code> means "an alias of whatever type <code>A</code> is".</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../consume-and-destructive-read/" class="btn btn-neutral float-right" title="Consume and destructive read"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../guarantees/" class="btn btn-neutral" title="Guarantees"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../guarantees/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../consume-and-destructive-read/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
