<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Memory allocation - Pony Tutorial</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/highlight.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Memory allocation";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../js/highlight.pack.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Pony Tutorial</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <ul class="subnav">
    <li><span>Getting started</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../..">Welcome!</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/what-you-need-to-start/">What you need to start</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/helloworld/">Helloworld</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/how-it-works/">How it works</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../getting-started/whitespace/">Whitespace</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Types</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/static-vs-dynamic/">Static vs dynamic</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/classes/">Classes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/primitives/">Primitives</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/actors/">Actors</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/traits-and-interfaces/">Traits and interfaces</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/type-aliases/">Type aliases</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/type-expressions/">Type expressions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../types/delegates/">Delegates</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Expressions</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/variables/">Variables</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/infix-ops/">Infix ops</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/control-structures/">Control structures</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/methods/">Methods</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/exceptions/">Exceptions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/sugar/">Sugar</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/object-literals/">Object literals</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../expressions/partial-application/">Partial application</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Capabilities</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/object-capabilities/">Object capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/reference-capabilities/">Reference capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/guarantees/">Guarantees</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/aliasing/">Aliasing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/consume-and-destructive-read/">Consume and destructive read</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/recovering-capabilities/">Recovering capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/combining-capabilities/">Combining capabilities</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/passing-and-sharing/">Passing and sharing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/capability-subtyping/">Capability subtyping</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/arrow-types/">Arrow types</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../capabilities/trust-boundary/">Trust boundary</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Generics</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../generics/polymorphic-types/">Polymorphic types</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../generics/polymorphic-methods/">Polymorphic methods</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../composition-inheritance/code-sharing/">Code sharing</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Pattern Matching</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../pattern-matching/match/">Match</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../pattern-matching/as/">As</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Packages</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/package-system/">Package system</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/use-statement/">Use statement</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/builtin/">Builtin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../packages/platform/">Use conditions</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../compiler-clargs/clargs/">Compiler args</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>C FFI</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../c-ffi/calling-c/">Calling C</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../c-ffi/linking-c/">Linking to C Libraries</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../c-ffi/c-abi/">C abi</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>The Runtime</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../otp/">Otp</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Memory allocation</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#memory-allocation-at-runtime">Memory allocation at runtime</a></li>
                
            
                <li class="toctree-l3"><a href="#fast-safe-and-cheap">Fast, Safe and Cheap</a></li>
                
            
                <li class="toctree-l3"><a href="#but-caveat-emptor">But Caveat Emptor</a></li>
                
            
                <li class="toctree-l3"><a href="#and-long-running-actors">And, long-running actors</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../garbage-collection/">Garbage collection</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../examples/examples/">Examples</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Pony Tutorial</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>The Runtime &raquo;</li>
        
      
    
    <li>Memory allocation</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="memory-allocation-at-runtime">Memory allocation at runtime</h1>
<p>Pony is NULL-free, type-safe language, with no dangling pointers, no
buffer overruns, but with a <strong>very fast garbage collector</strong>, so you
don't have to worry about explicit memory allocation, if on the heap
or stack, if in a threaded actor, or not.</p>
<h1 id="fast-safe-and-cheap">Fast, Safe and Cheap</h1>
<ul>
<li>An actor has ~240 bytes of memory overhead.</li>
<li>No locks. No context switches. All mutation is local</li>
<li>An idle actor consumes no resources ( other than memory )</li>
<li>You can have millions of actors at the same time</li>
</ul>
<h1 id="but-caveat-emptor">But Caveat Emptor</h1>
<p>But pony can be used to create <strong>C libraries</strong> and pony can use
external C libraries via the <strong>FFI</strong> which does not have this luxury,</p>
<p>So you <strong>can</strong> use any external C library out there, but the question is if
you <strong>need to</strong> and if you <strong>should</strong>.</p>
<p>The biggest problem is external heap memory, created by an external
FFI call, or created to support an external call. But external stack
space might also need some thoughts, esp. when being created from
actors.</p>
<p>Pony has no <strong>finalizers</strong>, callbacks which are called by the garbage
collector to free external memory, which was allocated by a FFI call.
The garbage collector is <em>not timely</em> (as with pure reference
counting), it is not triggered immediately when some object goes out
of scope.</p>
<p>A blocked actor will keep it's memory allocated, only a dead actor
will release it eventually.</p>
<h1 id="and-long-running-actors">And, long-running actors</h1>
<p>might cause unexpected out of memory errors, since the GC is not yet triggered on an
out-of-memory segfault or stack exhaustion.</p>
<p>...</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../garbage-collection/" class="btn btn-neutral float-right" title="Garbage collection"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../otp/" class="btn btn-neutral" title="Otp"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../otp/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../garbage-collection/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
